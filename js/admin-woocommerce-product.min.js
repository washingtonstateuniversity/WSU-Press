!function(a,b){function c(a){return a.split(/ \s*/)}function d(a){return c(a).pop()}var e=a(".wsu-press-extra-product-fields"),f=a(".wsu-press-product-add-attribution"),g=a(".wsu-press-product-authors"),h=_.template(a("#wsu-press-product-attribution-template").html()),i=_.template(a("#wsu-press-product-author-template").html());e.on("click","label",function(){a(this).addClass("screen-reader-text").next("input").focus()}),e.on("blur","input",function(){""===this.value&&a(this).prev("label").removeClass("screen-reader-text")}).on("focus","input",function(){a(this).prev("label").addClass("screen-reader-text")}),f.click(function(b){b.preventDefault(),a(this).closest("p").before(h({number:a(".wsu-press-product-attribution").length}))}),e.on("click",".remove-attribution",function(){a(this).closest(".wsu-press-product-attribution").remove()}),e.on("focus",".wsu-press-attribution-input",function(){a(this).autocomplete({minLength:3,source:function(c,e){e(a.ui.autocomplete.filter(b.wsu_press_authors,d(c.term)))},focus:function(){return!1},open:function(){a(this).autocomplete("widget").addClass("wsu-press-authors-menu")},select:function(a,b){var d=c(this.value);return d.pop(),d.push(b.item.value),d.push(""),this.value=d.join(" ").replace(/\s+$/,""),g.append(i({value:b.item.value})),!1}})})}(jQuery,window);